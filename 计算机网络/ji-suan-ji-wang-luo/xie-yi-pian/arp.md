# ARP

## 引言

[参考文章](https://zh.wikipedia.org/wiki/%E5%9C%B0%E5%9D%80%E8%A7%A3%E6%9E%90%E5%8D%8F%E8%AE%AE)

1. 定义： ARP 又称 地址解析协议，是一个通过解析`网络层`地址来寻找`数据链路层`地址的网络传输协议 ==网络层地址是指 IP 地址， 数据链路层地址是指： MAC==

## 1. 基本功能

在 TCP/IP 协议中，传输层只关心`目标主机的 IP地址+端口地址`(IP 地址决定传输的设备，端口决定是目标上的那个应用程序)， 网络层只关心 `目标主机的 IP 地址`, 以太网利用 `MAC 地址`来寻址到目标机器的网卡(只有当自己的 MAC 地址与帧中的 MAC 地址相同时，网卡才会接收), 因此，同一局域网中的主机要和另一个主机通信时，必须需要知道目标设备的 MAC 地址。

在我们的主机上就有一张 ARP 表，其中标明了 IP 地址和 MAC 地址的对应关系，在发送以太网帧时，如果发送的目标 IP 在 ARP 中找到就使用 ARP 表中对应的 MAC 地址，如果没有找到就需要使用 ARP 数据报进行查找，获取 目标MAC 地址后再进行发送。

ARP 缓存表结构：

## 命令

```shell
arp 
	- [/a [<inetaddr>] [/n <ifaceaddr>]]  # /a 显示当前所有 ARP 缓存表， /n 表示指定接口
	- [/g [<inetaddr>] [-n <ifaceaddr>]]  # 与上相同
	- [/d <inetaddr> [<ifaceaddr>]] 	  # /d 删除特定 IP 地址条目 ifaceaddr 指定特定接口
	- [/s <inetaddr> <etheraddr> [<ifaceaddr>]] # 添加静态项
	- /?   # 帮助
```

| 主机名称 | IP地址          | MAC地址             |
| ---- | ------------- | ----------------- |
| A    | 192.168.38.10 | 00-AA-00-62-D2-02 |
| B    | 192.168.38.11 | 00-BB-00-62-C2-02 |
| C    | 192.168.38.12 | 00-CC-00-62-C2-02 |
| D    | 192.168.38.13 | 00-DD-00-62-C2-02 |
